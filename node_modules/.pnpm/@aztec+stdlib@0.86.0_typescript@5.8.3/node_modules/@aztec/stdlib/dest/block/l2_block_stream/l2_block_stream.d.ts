import { type L2BlockSource } from '../l2_block_source.js';
import type { L2BlockStreamEventHandler, L2BlockStreamLocalDataProvider } from './interfaces.js';
/** Creates a stream of events for new blocks, chain tips updates, and reorgs, out of polling an archiver or a node. */
export declare class L2BlockStream {
    private l2BlockSource;
    private localData;
    private handler;
    private readonly log;
    private opts;
    private readonly runningPromise;
    private isSyncing;
    private hasStarted;
    constructor(l2BlockSource: Pick<L2BlockSource, 'getPublishedBlocks' | 'getBlockHeader' | 'getL2Tips'>, localData: L2BlockStreamLocalDataProvider, handler: L2BlockStreamEventHandler, log?: import("@aztec/foundation/log").Logger, opts?: {
        proven?: boolean;
        pollIntervalMS?: number;
        batchSize?: number;
        startingBlock?: number;
        /** Instead of downloading all blocks, only fetch the smallest subset that results in reliable reorg detection. */
        skipFinalized?: boolean;
    });
    start(): void;
    stop(): Promise<void>;
    isRunning(): boolean;
    sync(): Promise<void>;
    protected work(): Promise<void>;
    /**
     * Returns whether the source and local agree on the block hash at a given height.
     * @param blockNumber - The block number to test.
     * @param args - A cache of data already requested from source, to avoid re-requesting it.
     */
    private areBlockHashesEqualAt;
    private getBlockHashFromSource;
    private emitEvent;
}
//# sourceMappingURL=l2_block_stream.d.ts.map