import { createSafeJsonRpcClient, defaultFetch } from '@aztec/foundation/json-rpc/client';
import { z } from 'zod';
import { getVersioningResponseHandler } from '../versioning/index.js';
import { SequencerConfigSchema } from './configs.js';
import { ProverConfigSchema } from './prover-client.js';
export const AztecNodeAdminApiSchema = {
    setConfig: z.function().args(SequencerConfigSchema.merge(ProverConfigSchema).partial()).returns(z.void()),
    flushTxs: z.function().returns(z.void()),
    startSnapshotUpload: z.function().args(z.string()).returns(z.void())
};
export function createAztecNodeAdminClient(url, versions = {}, fetch = defaultFetch) {
    return createSafeJsonRpcClient(url, AztecNodeAdminApiSchema, {
        namespaceMethods: 'nodeAdmin',
        fetch,
        onResponse: getVersioningResponseHandler(versions)
    });
}
