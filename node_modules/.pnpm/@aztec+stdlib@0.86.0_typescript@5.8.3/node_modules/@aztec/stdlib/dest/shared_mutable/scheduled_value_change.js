import { Fr } from '@aztec/foundation/fields';
export class ScheduledValueChange {
    previous;
    post;
    blockOfChange;
    constructor(previous, post, blockOfChange){
        this.previous = previous;
        this.post = post;
        this.blockOfChange = blockOfChange;
        if (this.previous.length !== this.post.length) {
            throw new Error('Previous and post must have the same length');
        }
    }
    static empty(valueSize) {
        return new this(Array(valueSize).fill(new Fr(0)), Array(valueSize).fill(new Fr(0)), 0);
    }
    isEmpty() {
        return this.previous.every((v)=>v.isZero()) && this.post.every((v)=>v.isZero()) && this.blockOfChange === 0;
    }
    getCurrentAt(blockNumber) {
        if (blockNumber < this.blockOfChange) {
            return this.previous;
        } else {
            return this.post;
        }
    }
}
